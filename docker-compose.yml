version: '3.8'

services:
  minio:
    image: craftslab/minio:latest
    container_name: minio
    ports:
      - "9000:9000"  # S3 API endpoint
      - "9001:9001"  # MinIO Console
    volumes:
      # Bind mount: Map local path to /data in container
      # Use relative path (./data) or absolute path (/path/to/minio/data)
      # Example: - /path/to/minio/data:/data
      - ./data:/data
      # Mount certificates directory for HTTPS support
      # Place your SSL certificates in ./certs directory
      # MinIO will automatically detect and use certificates named:
      # - public.crt for the certificate
      # - private.key for the private key
      - ./certs:/root/.minio/certs
      # Alternative: Use named volume (uncomment below and comment above)
      # - minio-data:/data
    environment:
      - MINIO_ROOT_USER=minioadmin
      - MINIO_ROOT_PASSWORD=minioadmin
    command: server /data --console-address :9001
    restart: unless-stopped
    # Optional: Add healthcheck if wget/curl is available in the image
    # healthcheck:
    #   test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:9000/minio/health/live"]
    #   interval: 30s
    #   timeout: 20s
    #   retries: 3
    #   start_period: 10s

# Named volume (only needed if using named volume instead of bind mount)
# volumes:
#   minio-data:
#     driver: local
